{"ast":null,"code":"import _defineProperty from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _taggedTemplateLiteral from \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nvar _jsxFileName = \"/Users/maiuranloganathan/DevelopProjects/jefa-game/client/src/components/ReferAdd.js\";\n\nfunction _templateObject6() {\n  var data = _taggedTemplateLiteral([\"\\n  font-weight: 200;\\n  font-size: 18px;\\n  border-radius: 15px;\\n  padding: 0.5rem 5px;\\n  margin: 0.5rem 1rem;\\n  width: fit-content;\\n  background: white;\\n  color: black;\\n  /* border: 1px solid black; */\\n  position: relative;\\n\"]);\n\n  _templateObject6 = function _templateObject6() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject5() {\n  var data = _taggedTemplateLiteral([\"\\n  /* width: 100%; */\\n  border-radius: 5px;\\n  padding: 8px 10px;\\n  margin: 8px 0px;\\n  width: 40%;\\n  margin-left: 26%;\\n  /* box-sizing: border-box; */\\n  &:focus{\\n    background-color: white;\\n  }\\n\"]);\n\n  _templateObject5 = function _templateObject5() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject4() {\n  var data = _taggedTemplateLiteral([\"\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject4 = function _templateObject4() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject3() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 10px;\\n  padding-left: 28%; \\n  font-weight: 500;\\n  margin: 0 auto;\\n\"]);\n\n  _templateObject3 = function _templateObject3() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n  padding: 10px;\\n  float:  center;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n  /* display: inline-block; */\\n  border-radius: 3px;\\n  padding: 0.5rem 5px;\\n  margin: 0.5rem 1rem;\\n  width: fit-content;\\n  background: #2d3142;\\n  color: black;\\n  border: 1px solid black;\\n  position: relative;\\n  /* right: -250px; */\\n  float: left;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport cogoToast from 'cogo-toast';\nimport Modal from 'react-modal';\nexport var Button = styled.button(_templateObject());\nvar Form = styled.form(_templateObject2());\nvar FormTitle = styled.h2(_templateObject3());\nvar Container = styled.div(_templateObject4());\nvar Input = styled.input(_templateObject5());\nvar Submit = styled.button(_templateObject6());\nvar modalStyle = {\n  content: {\n    top: '50%',\n    left: '50%',\n    right: 'auto',\n    bottom: 'auto',\n    marginRight: '-50%',\n    transform: 'translate(-50%, -50%)'\n  }\n};\nexport var ReferAdd = /*#__PURE__*/function (_Component) {\n  _inherits(ReferAdd, _Component);\n\n  function ReferAdd(props) {\n    var _this;\n\n    _classCallCheck(this, ReferAdd);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(ReferAdd).call(this, props));\n\n    _this.handleChange = function (_ref) {\n      var target = _ref.target;\n      var name = target.name,\n          value = target.value;\n\n      _this.setState(_defineProperty({}, name, value));\n    };\n\n    _this.setOpen = function (param) {\n      _this.setState({\n        modalIsOpen: param\n      });\n    };\n\n    _this.handleSubmit = function (e) {\n      e.preventDefault(); // this.generateReferral();\n\n      console.log('Here boii' + _this.state.referrerReferralCode);\n      axios.put('/api/add/' + _this.props.match.params.code);\n      var re = /^[ ]*([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})[ ]*$/i;\n\n      if (re.test(_this.state.email)) {\n        var payload = {\n          email: _this.state.email,\n          rank: _this.state.rank,\n          firstname: _this.state.firstname,\n          lastname: _this.state.lastname,\n          referralCode: _this.state.referralCode,\n          referralSource: _this.state.referralSource,\n          referrerReferralCode: _this.state.referrerReferralCode,\n          referrerEmail: _this.state.referrerEmail,\n          referralCountTotal: _this.state.referralCountTotal,\n          postCountTotal: _this.state.postCountTotal,\n          shareURL: _this.state.shareURL,\n          twitterShareURL: _this.state.twitterShareURL,\n          facebookShareURL: _this.state.facebookShareURL,\n          whatsappShareURL: _this.state.whatsappShareURL\n        };\n        axios({\n          url: '/api/add',\n          method: 'POST',\n          data: payload\n        }).then(function () {\n          console.log('Data has been sent');\n\n          _this.reset();\n        }).catch(function (err) {\n          console.log(err);\n        });\n        cogoToast.success(\"Success!\");\n\n        _this.setOpen(true);\n      } else {\n        cogoToast.error(\"Error!\");\n\n        _this.setOpen(false);\n      }\n    };\n\n    _this.reset = function () {\n      _this.setState({\n        email: ''\n      });\n    };\n\n    _this.state = {\n      email: '',\n      rank: '',\n      firstname: '',\n      lastname: '',\n      referralCode: '',\n      referralSource: '',\n      referrerReferralCode: '',\n      referrerEmail: '',\n      referralCountTotal: 0,\n      postCountTotal: 0,\n      shareURL: '',\n      twitterShareURL: '',\n      facebookShareURL: '',\n      whatsappShareURL: '',\n      modalIsOpen: false\n    }; // this.handleSubmit = this.handleSubmit.bind(this);\n    // this.generateReferral = this.generateReferral.bind(this);\n\n    return _this;\n  }\n\n  _createClass(ReferAdd, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.generateReferral();\n    }\n  }, {\n    key: \"generateReferral\",\n    value: function generateReferral() {\n      var random = Math.random().toString(36).substr(2, 7);\n      var shareurl = 'https://jefa.herokuapp.com/refer/' + random; // let code = this.props.match.params.code;\n\n      this.setState({\n        referralCode: random,\n        // referrerReferralCode: code,\n        shareURL: shareurl\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(FormTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }\n      }, \" Refered member - Waitlist \"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"email\",\n        placeholder: \"email \",\n        value: this.state.email,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 19\n        }\n      }), /*#__PURE__*/React.createElement(Submit, {\n        onClick: this.sendMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 17\n        }\n      }, \"Submit\"), /*#__PURE__*/React.createElement(Recaptcha, {\n        ref: function ref(_ref2) {\n          return _this2.recaptcha = _ref2;\n        },\n        sitekey: \"6LccVtEZAAAAANBW-lRvMR3yTCkPbLrIKLztcAR1\",\n        onResolved: this.onResolved,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(Modal, {\n        isOpen: this.state.modalIsOpen,\n        onRequestClose: function onRequestClose() {\n          return _this2.setOpen(false);\n        },\n        style: modalStyle,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 17\n        }\n      }, \" Advance your position on the waiting list by inviting friends. \"), /*#__PURE__*/React.createElement(\"body\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 17\n        }\n      }, \" Earn $ 1 for each friend you invite. \"), /*#__PURE__*/React.createElement(\"body\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 17\n        }\n      }, \" People in front of you \"), /*#__PURE__*/React.createElement(\"h2\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 17\n        }\n      }, \" 3123 \"), /*#__PURE__*/React.createElement(\"a\", {\n        href: this.state.shareURL,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 17\n        }\n      }, \"Share your referral: \", this.state.shareURL, \"!\"), /*#__PURE__*/React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.setOpen(false);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 17\n        }\n      }, \" Close \")));\n    }\n  }]);\n\n  return ReferAdd;\n}(Component);\nexport default ReferAdd;","map":{"version":3,"sources":["/Users/maiuranloganathan/DevelopProjects/jefa-game/client/src/components/ReferAdd.js"],"names":["React","Component","axios","styled","cogoToast","Modal","Button","button","Form","form","FormTitle","h2","Container","div","Input","input","Submit","modalStyle","content","top","left","right","bottom","marginRight","transform","ReferAdd","props","handleChange","target","name","value","setState","setOpen","param","modalIsOpen","handleSubmit","e","preventDefault","console","log","state","referrerReferralCode","put","match","params","code","re","test","email","payload","rank","firstname","lastname","referralCode","referralSource","referrerEmail","referralCountTotal","postCountTotal","shareURL","twitterShareURL","facebookShareURL","whatsappShareURL","url","method","data","then","reset","catch","err","success","error","generateReferral","random","Math","toString","substr","shareurl","sendMessage","ref","recaptcha","onResolved"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport axios from 'axios';\nimport styled from 'styled-components';\nimport cogoToast from 'cogo-toast';\nimport Modal from 'react-modal'\n\nexport const Button = styled.button`\n  /* display: inline-block; */\n  border-radius: 3px;\n  padding: 0.5rem 5px;\n  margin: 0.5rem 1rem;\n  width: fit-content;\n  background: #2d3142;\n  color: black;\n  border: 1px solid black;\n  position: relative;\n  /* right: -250px; */\n  float: left;\n`\n\n\nconst Form = styled.form`\n  padding: 10px;\n  float:  center;\n`\n\nconst FormTitle = styled.h2`\n  padding: 10px;\n  padding-left: 28%; \n  font-weight: 500;\n  margin: 0 auto;\n`\n\nconst Container = styled.div`\n  margin: 0 auto;\n`\n\nconst Input = styled.input`\n  /* width: 100%; */\n  border-radius: 5px;\n  padding: 8px 10px;\n  margin: 8px 0px;\n  width: 40%;\n  margin-left: 26%;\n  /* box-sizing: border-box; */\n  &:focus{\n    background-color: white;\n  }\n`\n\n\nconst Submit = styled.button`\n  font-weight: 200;\n  font-size: 18px;\n  border-radius: 15px;\n  padding: 0.5rem 5px;\n  margin: 0.5rem 1rem;\n  width: fit-content;\n  background: white;\n  color: black;\n  /* border: 1px solid black; */\n  position: relative;\n`\n\nconst modalStyle = {\n  content : {\n    top                   : '50%',\n    left                  : '50%',\n    right                 : 'auto',\n    bottom                : 'auto',\n    marginRight           : '-50%',\n    transform             : 'translate(-50%, -50%)'\n  }\n};\n\n\nexport class ReferAdd extends Component {\n\n    constructor(props){  \n        super(props);  \n\n        this.state = {  \n            email: '',\n            rank: '',\n            firstname: '',\n            lastname: '',\n            referralCode: '',\n            referralSource: '',\n            referrerReferralCode: '',\n            referrerEmail: '',\n            referralCountTotal: 0,\n            postCountTotal: 0,\n            shareURL: '',\n            twitterShareURL: '',\n            facebookShareURL: '',\n            whatsappShareURL: '',\n            modalIsOpen: false,\n          }\n\n    \n        // this.handleSubmit = this.handleSubmit.bind(this);\n        // this.generateReferral = this.generateReferral.bind(this);\n      }  \n\n      componentDidMount(){\n        this.generateReferral();\n      }\n\n    \n      handleChange = ({ target }) => {\n        const { name, value } = target; \n        this.setState({\n          [name]: value\n        })\n      }\n\n      setOpen = (param) => {\n        this.setState({\n            modalIsOpen: param\n        })\n      }\n\n      generateReferral(){\n        let random =  Math.random().toString(36).substr(2, 7);\n        let shareurl = 'https://jefa.herokuapp.com/refer/' + random;\n        // let code = this.props.match.params.code;\n        this.setState({\n          referralCode: random,\n          // referrerReferralCode: code,\n          shareURL: shareurl\n        });\n      }\n    \n      handleSubmit = (e) => {\n        \n        \n        e.preventDefault();\n\n        // this.generateReferral();\n\n        console.log('Here boii' + this.state.referrerReferralCode);\n        \n        \n        axios.put('/api/add/' + this.props.match.params.code);\n\n        let re = /^[ ]*([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})[ ]*$/i;\n\n        if (re.test(this.state.email)){\n          const payload = {\n            email: this.state.email,\n            rank: this.state.rank,\n            firstname: this.state.firstname,\n            lastname: this.state.lastname,\n            referralCode: this.state.referralCode,\n            referralSource: this.state.referralSource,\n            referrerReferralCode: this.state.referrerReferralCode,\n            referrerEmail: this.state.referrerEmail,\n            referralCountTotal: this.state.referralCountTotal,\n            postCountTotal: this.state.postCountTotal,\n            shareURL: this.state.shareURL,\n            twitterShareURL: this.state.twitterShareURL,\n            facebookShareURL: this.state.facebookShareURL,\n            whatsappShareURL: this.state.whatsappShareURL,\n          };\n      \n          axios({\n            url: '/api/add',\n            method: 'POST',\n            data: payload\n          }) \n          .then(() => {\n            console.log('Data has been sent')\n            this.reset();\n          })\n          .catch((err) => {\n            console.log(err)\n          })\n          cogoToast.success(\"Success!\");\n          this.setOpen(true);\n        } else {\n          cogoToast.error(\"Error!\");\n          this.setOpen(false);\n        }\n      }\n    \n      reset = () => {\n        this.setState({\n          email: '',\n        })\n      }\n    \n    \n\n    render() {\n        return(\n            <Container>\n              \n              \n\n              <Form onSubmit={this.handleSubmit}>\n              <FormTitle> Refered member - Waitlist </FormTitle>\n            \n              <br/>\n\n              \n\n                  <Input \n                    type=\"text\"\n                    name=\"email\"\n                    placeholder=\"email \"\n                    value={this.state.email}\n                    onChange={this.handleChange}/>\n\n                  \n                  \n                <Submit onClick={this.sendMessage}>Submit</Submit>\n                <Recaptcha\n                    ref={ ref => this.recaptcha = ref }\n                    sitekey=\"6LccVtEZAAAAANBW-lRvMR3yTCkPbLrIKLztcAR1\"\n                    onResolved={ this.onResolved }\n                />\n\n              </Form>\n\n              <Modal isOpen={this.state.modalIsOpen} onRequestClose={() => this.setOpen(false)} style={modalStyle}>\n                <h2> Advance your position on the waiting list by inviting friends. </h2>\n                <body> Earn $ 1 for each friend you invite. </body>\n                <body> People in front of you </body>\n                <h2> 3123 </h2>\n                <a href={this.state.shareURL}>Share your referral: {this.state.shareURL}!</a>\n                <button onClick={() => this.setOpen(false)}> Close </button>\n              </Modal>\n\n            </Container>\n          );\n    }\n}\n\nexport default ReferAdd;\n"]},"metadata":{},"sourceType":"module"}